def diaCompleto = new Date()
def dia =  new Date().getDay()
def dias_letras =
[1:"Lunes",
2:"Martes",
3:"Miércoles",
4:"Jueves",
5:"Viernes"
]

pipeline
{
    agent any
    stages
    {
        stage('Lunes')
        {
            steps
            {   
                script{
                    //Lunes no hace nada
                    if(dia == 1)
                    {
                    }
                }
            }
        }
        stage('Martes')
        {
            steps
            {
                script{
                    //Martes fecha actual
                    if(dia == 2)
                    {
                        println diaCompleto
                    }
                }
                
            }
        }
        stage('Miércoles')
        {
            steps
            {
                script
                {
                    //Miércoles no hace nada
                    if(dia == 3)
                    {
                       
                    }
                }
            }
        }
        stage('Jueves')
        {
            steps
            {
                script
                {
                    //Jueves no hace nada
                    if(dia == 4)
                    {
                       
                    }
                }
            }
        }
        stage('Viernes')
        {
            steps
            {
                script
                {
                    //Viernes
                    if(dia == 5)
                    {
                        if (cause != null) {
                            //Me da error el ejmplo para obtener el usuario
                            def cause = currentBuild.rawBuild.getCause(Cause.UserIdCause)
                            if (cause != null) {
                                def user = cause.userId ?: 'anonymous'
                                println "El usuario que ejecuta la tarea es ${user}"
                            }
                        }
                    }
                }
            }
        }
    }
}
